#UpstartBundle
##About
This is a [Symfony](http://symfony.com/what-is-symfony) bundle for painless [Upstart](http://upstart.ubuntu.com/cookbook/#introduction) configuration.
It helps to make any symfony command (or any other script) run forever in background and restart on fails.
Most common example of such script is [queue](https://www.rabbitmq.com) [consumer](https://github.com/videlalvaro/rabbitmqbundle), another example is [websocket](http://socketo.me) server.
##Installation
Require the bundle and its dependencies with composer:
```bash
$ composer require sfnix/upstart
```
Register the bundle:
```php
// app/AppKernel.php

public function registerBundles()
{
    $bundles = [
        new SfNix\UpstartBundle\SfNixUpstartBundle(),
    ];
}
```
##Usage
Add the `upstart` section to your configuration file:
```yml
# Example app/config/upstart.yml
upstart:
    project: imaging
    default:
        verbose: 1
        native:
            setuid: "www-data"
            chdir: %kernel.root_dir%/..
    job:
        websocket:
            script: "php bin/chat-server.php"
        imageResizer:
            quantity: 10
            command: "rabbitmq:consumer image.resize -w"
            tag: [image]
        faceRecognizer:
            quantity: 5
            script: "python faceRecognizer.py"
            native: {killSignal: "SIGKILL"}
            tag: [image]
        test:
            command: "upstart:test --error 10"
            verbose: 3
```
Generate and install upstart files derived from your configuration.
It also will try to enable bash completion for other commands of this bundle.
```bash
# ./app/console upstart:install
```
List jobs, and their statuses.
It can show statuses continuously with `--watch` (`-w`) option.
Refresh interval is 1 second by default, see `--interval` (`-i`) option.
```bash
# ./app/console upstart:list
```
Start jobs.
```bash
# ./app/console upstart:start
```
Stop jobs.
```bash
# ./app/console upstart:stop
```
Stop and start jobs.
```bash
# ./app/console upstart:restart
```
Show tails of logs of jobs.
It can show logs continuously with `--watch` (`-w`) option.
If you are redirecting script output in any way then you need to use `log`, `logDir` job config options.
```bash
# ./app/console upstart:log
```
Delete upstart files and bash completion scripts generated by this bundle.
```bash
# ./app/console upstart:delete
```
You can use multiple job names or tags as arguments for any command, to filter jobs on which this command will operate.
```bash
# ./app/console upstart:stop websocket image
```
You can use test command as job exec, for learning purposes.
It runs forever by default, but take a look at `--exit` and `--error` options. 
```bash
# ./app/console upstart:test --error 10 -vvv
```
TODO
##Full configuration reference
TODO